import { Client } from "../../src";
import { contextParamsLocalChain } from "../integration/constants";
import { Context } from "@aragon/sdk-client-common";
import { ContractFactory } from "@ethersproject/contracts";
import { abi as ERC1155_ABI } from "@openzeppelin/contracts/build/contracts/ERC1155.json";

export function deployErc1155() {
  const client = new Client(new Context(contextParamsLocalChain));
  const erc1155Bytecode =
    "0x60806040523480156200001157600080fd5b5060405162001f6038038062001f608339810160408190526200003491620004a8565b806200004081620000d8565b5062000071336000600a60405180604001604052806002815260200161060f60f31b815250620000ea60201b60201c565b620000a1336001600a60405180604001604052806002815260200161060f60f31b815250620000ea60201b60201c565b620000d1336002600a60405180604001604052806002815260200161060f60f31b815250620000ea60201b60201c565b5062000848565b6002620000e68282620005d5565b5050565b6001600160a01b038416620001505760405162461bcd60e51b815260206004820152602160248201527f455243313135353a206d696e7420746f20746865207a65726f206164647265736044820152607360f81b60648201526084015b60405180910390fd5b3360006200015e856200020c565b905060006200016d856200020c565b90506000868152602081815260408083206001600160a01b038b16845290915281208054879290620001a1908490620006a1565b909155505060408051878152602081018790526001600160a01b03808a1692600092918716917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62910160405180910390a4620002038360008989898962000262565b50505050505050565b60408051600180825281830190925260609160009190602080830190803683370190505090508281600081518110620002495762000249620006c9565b602090810291909101015292915050565b505050505050565b62000281846001600160a01b03166200042e60201b620006391760201c565b156200025a5760405163f23a6e6160e01b81526001600160a01b0385169063f23a6e6190620002bd90899089908890889088906004016200070d565b6020604051808303816000875af1925050508015620002fb575060408051601f3d908101601f19168201909252620002f89181019062000754565b60015b620003bb576200030a62000787565b806308c379a0036200034a575062000321620007a4565b806200032e57506200034c565b8060405162461bcd60e51b815260040162000147919062000833565b505b60405162461bcd60e51b815260206004820152603460248201527f455243313135353a207472616e7366657220746f206e6f6e2d4552433131353560448201527f526563656976657220696d706c656d656e746572000000000000000000000000606482015260840162000147565b6001600160e01b0319811663f23a6e6160e01b14620002035760405162461bcd60e51b815260206004820152602860248201527f455243313135353a204552433131353552656365697665722072656a656374656044820152676420746f6b656e7360c01b606482015260840162000147565b6001600160a01b03163b151590565b634e487b7160e01b600052604160045260246000fd5b601f8201601f191681016001600160401b03811182821017156200047b576200047b6200043d565b6040525050565b60005b838110156200049f57818101518382015260200162000485565b50506000910152565b600060208284031215620004bb57600080fd5b81516001600160401b0380821115620004d357600080fd5b818401915084601f830112620004e857600080fd5b815181811115620004fd57620004fd6200043d565b604051915062000518601f8201601f19166020018362000453565b8082528560208285010111156200052e57600080fd5b6200054181602084016020860162000482565b50949350505050565b600181811c908216806200055f57607f821691505b6020821081036200058057634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115620005d057600081815260208120601f850160051c81016020861015620005af5750805b601f850160051c820191505b818110156200025a57828155600101620005bb565b505050565b81516001600160401b03811115620005f157620005f16200043d565b62000609816200060284546200054a565b8462000586565b602080601f831160018114620006415760008415620006285750858301515b600019600386901b1c1916600185901b1785556200025a565b600085815260208120601f198616915b82811015620006725788860151825594840194600190910190840162000651565b5085821015620006915787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b80820180821115620006c357634e487b7160e01b600052601160045260246000fd5b92915050565b634e487b7160e01b600052603260045260246000fd5b60008151808452620006f981602086016020860162000482565b601f01601f19169290920160200192915050565b6001600160a01b03868116825285166020820152604081018490526060810183905260a0608082018190526000906200074990830184620006df565b979650505050505050565b6000602082840312156200076757600080fd5b81516001600160e01b0319811681146200078057600080fd5b9392505050565b600060033d1115620007a15760046000803e5060005160e01c5b90565b600060443d1015620007b35790565b6040516003193d81016004833e81513d6001600160401b038083116024840183101715620007e357505050505090565b8285019150815181811115620007fc5750505050505090565b843d8701016020828501011115620008175750505050505090565b620008286020828601018762000453565b509095945050505050565b602081526000620007806020830184620006df565b61170880620008586000396000f3fe608060405234801561001057600080fd5b50600436106100875760003560e01c80634e1273f41161005b5780634e1273f41461010a578063a22cb4651461012a578063e985e9c51461013d578063f242432a1461017957600080fd5b8062fdd58e1461008c57806301ffc9a7146100b25780630e89341c146100d55780632eb2c2d6146100f5575b600080fd5b61009f61009a366004610f9d565b61018c565b6040519081526020015b60405180910390f35b6100c56100c0366004610ff8565b610238565b60405190151581526020016100a9565b6100e86100e336600461101c565b61031b565b6040516100a9919061107b565b6101086101033660046111da565b6103af565b005b61011d610118366004611284565b610451565b6040516100a9919061138a565b61010861013836600461139d565b61058f565b6100c561014b3660046113d9565b6001600160a01b03918216600090815260016020908152604080832093909416825291909152205460ff1690565b61010861018736600461140c565b61059e565b60006001600160a01b03831661020f5760405162461bcd60e51b815260206004820152602a60248201527f455243313135353a2061646472657373207a65726f206973206e6f742061207660448201527f616c6964206f776e65720000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b506000818152602081815260408083206001600160a01b03861684529091529020545b92915050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082167fd9b67a260000000000000000000000000000000000000000000000000000000014806102cb57507fffffffff0000000000000000000000000000000000000000000000000000000082167f0e89341c00000000000000000000000000000000000000000000000000000000145b8061023257507f01ffc9a7000000000000000000000000000000000000000000000000000000007fffffffff00000000000000000000000000000000000000000000000000000000831614610232565b60606002805461032a90611471565b80601f016020809104026020016040519081016040528092919081815260200182805461035690611471565b80156103a35780601f10610378576101008083540402835291602001916103a3565b820191906000526020600020905b81548152906001019060200180831161038657829003601f168201915b50505050509050919050565b6001600160a01b0385163314806103cb57506103cb853361014b565b61043d5760405162461bcd60e51b815260206004820152602e60248201527f455243313135353a2063616c6c6572206973206e6f7420746f6b656e206f776e60448201527f6572206f7220617070726f7665640000000000000000000000000000000000006064820152608401610206565b61044a8585858585610648565b5050505050565b606081518351146104ca5760405162461bcd60e51b815260206004820152602960248201527f455243313135353a206163636f756e747320616e6420696473206c656e67746860448201527f206d69736d6174636800000000000000000000000000000000000000000000006064820152608401610206565b6000835167ffffffffffffffff8111156104e6576104e661108e565b60405190808252806020026020018201604052801561050f578160200160208202803683370190505b50905060005b84518110156105875761055a858281518110610533576105336114ab565b602002602001015185838151811061054d5761054d6114ab565b602002602001015161018c565b82828151811061056c5761056c6114ab565b6020908102919091010152610580816114d7565b9050610515565b509392505050565b61059a3383836108e6565b5050565b6001600160a01b0385163314806105ba57506105ba853361014b565b61062c5760405162461bcd60e51b815260206004820152602e60248201527f455243313135353a2063616c6c6572206973206e6f7420746f6b656e206f776e60448201527f6572206f7220617070726f7665640000000000000000000000000000000000006064820152608401610206565b61044a85858585856109f8565b6001600160a01b03163b151590565b81518351146106bf5760405162461bcd60e51b815260206004820152602860248201527f455243313135353a2069647320616e6420616d6f756e7473206c656e6774682060448201527f6d69736d617463680000000000000000000000000000000000000000000000006064820152608401610206565b6001600160a01b03841661073b5760405162461bcd60e51b815260206004820152602560248201527f455243313135353a207472616e7366657220746f20746865207a65726f20616460448201527f64726573730000000000000000000000000000000000000000000000000000006064820152608401610206565b3360005b845181101561087857600085828151811061075c5761075c6114ab565b60200260200101519050600085838151811061077a5761077a6114ab565b602090810291909101810151600084815280835260408082206001600160a01b038e1683529093529190912054909150818110156108205760405162461bcd60e51b815260206004820152602a60248201527f455243313135353a20696e73756666696369656e742062616c616e636520666f60448201527f72207472616e73666572000000000000000000000000000000000000000000006064820152608401610206565b6000838152602081815260408083206001600160a01b038e8116855292528083208585039055908b1682528120805484929061085d90849061150f565b9250508190555050505080610871906114d7565b905061073f565b50846001600160a01b0316866001600160a01b0316826001600160a01b03167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb87876040516108c8929190611522565b60405180910390a46108de818787878787610bce565b505050505050565b816001600160a01b0316836001600160a01b03160361096d5760405162461bcd60e51b815260206004820152602960248201527f455243313135353a2073657474696e6720617070726f76616c2073746174757360448201527f20666f722073656c6600000000000000000000000000000000000000000000006064820152608401610206565b6001600160a01b0383811660008181526001602090815260408083209487168084529482529182902080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001686151590811790915591519182527f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a3505050565b6001600160a01b038416610a745760405162461bcd60e51b815260206004820152602560248201527f455243313135353a207472616e7366657220746f20746865207a65726f20616460448201527f64726573730000000000000000000000000000000000000000000000000000006064820152608401610206565b336000610a8085610ddb565b90506000610a8d85610ddb565b90506000868152602081815260408083206001600160a01b038c16845290915290205485811015610b265760405162461bcd60e51b815260206004820152602a60248201527f455243313135353a20696e73756666696369656e742062616c616e636520666f60448201527f72207472616e73666572000000000000000000000000000000000000000000006064820152608401610206565b6000878152602081815260408083206001600160a01b038d8116855292528083208985039055908a16825281208054889290610b6390849061150f565b909155505060408051888152602081018890526001600160a01b03808b16928c821692918816917fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f62910160405180910390a4610bc3848a8a8a8a8a610e26565b505050505050505050565b6001600160a01b0384163b156108de576040517fbc197c810000000000000000000000000000000000000000000000000000000081526001600160a01b0385169063bc197c8190610c2b9089908990889088908890600401611550565b6020604051808303816000875af1925050508015610c66575060408051601f3d908101601f19168201909252610c63918101906115ae565b60015b610d1b57610c726115cb565b806308c379a003610cab5750610c866115e7565b80610c915750610cad565b8060405162461bcd60e51b8152600401610206919061107b565b505b60405162461bcd60e51b815260206004820152603460248201527f455243313135353a207472616e7366657220746f206e6f6e2d4552433131353560448201527f526563656976657220696d706c656d656e7465720000000000000000000000006064820152608401610206565b7fffffffff0000000000000000000000000000000000000000000000000000000081167fbc197c810000000000000000000000000000000000000000000000000000000014610dd25760405162461bcd60e51b815260206004820152602860248201527f455243313135353a204552433131353552656365697665722072656a6563746560448201527f6420746f6b656e730000000000000000000000000000000000000000000000006064820152608401610206565b50505050505050565b60408051600180825281830190925260609160009190602080830190803683370190505090508281600081518110610e1557610e156114ab565b602090810291909101015292915050565b6001600160a01b0384163b156108de576040517ff23a6e610000000000000000000000000000000000000000000000000000000081526001600160a01b0385169063f23a6e6190610e83908990899088908890889060040161168f565b6020604051808303816000875af1925050508015610ebe575060408051601f3d908101601f19168201909252610ebb918101906115ae565b60015b610eca57610c726115cb565b7fffffffff0000000000000000000000000000000000000000000000000000000081167ff23a6e610000000000000000000000000000000000000000000000000000000014610dd25760405162461bcd60e51b815260206004820152602860248201527f455243313135353a204552433131353552656365697665722072656a6563746560448201527f6420746f6b656e730000000000000000000000000000000000000000000000006064820152608401610206565b80356001600160a01b0381168114610f9857600080fd5b919050565b60008060408385031215610fb057600080fd5b610fb983610f81565b946020939093013593505050565b7fffffffff0000000000000000000000000000000000000000000000000000000081168114610ff557600080fd5b50565b60006020828403121561100a57600080fd5b813561101581610fc7565b9392505050565b60006020828403121561102e57600080fd5b5035919050565b6000815180845260005b8181101561105b5760208185018101518683018201520161103f565b506000602082860101526020601f19601f83011685010191505092915050565b6020815260006110156020830184611035565b634e487b7160e01b600052604160045260246000fd5b601f19601f830116810181811067ffffffffffffffff821117156110ca576110ca61108e565b6040525050565b600067ffffffffffffffff8211156110eb576110eb61108e565b5060051b60200190565b600082601f83011261110657600080fd5b81356020611113826110d1565b60405161112082826110a4565b83815260059390931b850182019282810191508684111561114057600080fd5b8286015b8481101561115b5780358352918301918301611144565b509695505050505050565b600082601f83011261117757600080fd5b813567ffffffffffffffff8111156111915761119161108e565b6040516111a86020601f19601f85011601826110a4565b8181528460208386010111156111bd57600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a086880312156111f257600080fd5b6111fb86610f81565b945061120960208701610f81565b9350604086013567ffffffffffffffff8082111561122657600080fd5b61123289838a016110f5565b9450606088013591508082111561124857600080fd5b61125489838a016110f5565b9350608088013591508082111561126a57600080fd5b5061127788828901611166565b9150509295509295909350565b6000806040838503121561129757600080fd5b823567ffffffffffffffff808211156112af57600080fd5b818501915085601f8301126112c357600080fd5b813560206112d0826110d1565b6040516112dd82826110a4565b83815260059390931b85018201928281019150898411156112fd57600080fd5b948201945b838610156113225761131386610f81565b82529482019490820190611302565b9650508601359250508082111561133857600080fd5b50611345858286016110f5565b9150509250929050565b600081518084526020808501945080840160005b8381101561137f57815187529582019590820190600101611363565b509495945050505050565b602081526000611015602083018461134f565b600080604083850312156113b057600080fd5b6113b983610f81565b9150602083013580151581146113ce57600080fd5b809150509250929050565b600080604083850312156113ec57600080fd5b6113f583610f81565b915061140360208401610f81565b90509250929050565b600080600080600060a0868803121561142457600080fd5b61142d86610f81565b945061143b60208701610f81565b93506040860135925060608601359150608086013567ffffffffffffffff81111561146557600080fd5b61127788828901611166565b600181811c9082168061148557607f821691505b6020821081036114a557634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b60007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203611508576115086114c1565b5060010190565b80820180821115610232576102326114c1565b604081526000611535604083018561134f565b8281036020840152611547818561134f565b95945050505050565b60006001600160a01b03808816835280871660208401525060a0604083015261157c60a083018661134f565b828103606084015261158e818661134f565b905082810360808401526115a28185611035565b98975050505050505050565b6000602082840312156115c057600080fd5b815161101581610fc7565b600060033d11156115e45760046000803e5060005160e01c5b90565b600060443d10156115f55790565b6040517ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc803d016004833e81513d67ffffffffffffffff816024840111818411171561164357505050505090565b828501915081518181111561165b5750505050505090565b843d87010160208285010111156116755750505050505090565b611684602082860101876110a4565b509095945050505050565b60006001600160a01b03808816835280871660208401525084604083015283606083015260a060808301526116c760a0830184611035565b97965050505050505056fea2646970667358221220ec20215a09a2e7af9d19382dec8b3fa7de6449184ceee30f75cd94b73733b38364736f6c63430008110033";

  // the bytecode automatically mints 10 of tokenID 0 to the deployer
  const factory = new ContractFactory(
    ERC1155_ABI,
    erc1155Bytecode,
    client.web3.getConnectedSigner(),
  );
  return factory.deploy("https://example.org/{id}.json");
}
